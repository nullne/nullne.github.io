<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>NULLNE</title>
	<meta name="description" content="">
	<meta name="author" content="nullne">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/js/html5.js"></script>
	<![endif]-->

    <script src="/theme/js/jquery-2.1.1.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>

	<!-- Styles -->
    <link rel="shortcut icon" href="/theme/img/icons/fav.ico" >

	<link href="/theme/css/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/css/local.css" rel="stylesheet">
	<link href="/theme/css/pygments.css" rel="stylesheet">
    <link href="/theme/tipuesearch/tipuesearch.css" rel="stylesheet" >

	<!-- Feeds -->
	<link href="/all-atom.xml" type="application/atom+xml" rel="alternate" title="NULLNE Atom Feed" />




<script>var _gaq=[['_setAccount','UA-56583262-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
</head>
<body>

    <div class="navbar navbar-fixed-top navbar-inverse">
        <div class="navbar-inner">
            <div class="container">

                <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar">nice</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <!-- Be sure to leave the brand out there if you want it shown -->
                <a class="brand" href="/">NULLNE</a>

                <!-- Everything you want hidden at 940px or less, place within here -->
                <div class="nav-collapse collapse">

                <ul class="nav">

                        <li><a href="/about.html">About</a></li>
                </ul>
                    <!-- .nav, .navbar-search, .navbar-form, etc -->
                    <form class="navbar-search pull-right" id="searchform" action="/search" onsubmit="return (this.elements['q'].value.length > 0)">
                        <input type="text" name="q" class="search-query" placeholder="Search">
                    </form>
                </div>

            </div>
        </div>
    </div>

    <div class="wrapper">

    <div class="container content-wrapper">
        <div class="content fixed-head-top">
            <!--
            <div class="page-header">
                <h1> </h1>
            </div>
            -->

<div class='article'>
	<h2><a class="more" href="/golang/2015/first-glance-at-go.html">Golang</a></h2>
	<div class=""><h2>Go</h2>
<h3>语法差异</h3>
<ul>
<li>Variables and Constant</li>
</ul>
<div class="highlight"><pre><span class="kn">package</span> <span class="nx">main</span>

<span class="kd">var</span> <span class="nx">s</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&quot;initial&quot;</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
    <span class="kd">const</span> <span class="nx">n</span> <span class="p">=</span> <span class="mi">5000000</span>
    <span class="nx">f</span> <span class="o">:=</span> <span class="nb">float64</span><span class="p">(</span><span class="mf">3.3</span><span class="p">)</span>
<span class="p">}</span> 
</pre></div>


<ul>
<li>For Loop</li>
</ul>
<div class="highlight"><pre>    <span class="c1">// classic initial/condition/after for loop </span>
    <span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">7</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// most basic for loop</span>
    <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
        <span class="nx">i</span> <span class="p">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="p">}</span>

    <span class="c1">// infinite loop</span>
    <span class="k">for</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;loop&quot;</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>


<ul>
<li>If/Else</li>
<li>Switch</li>
</ul>
<div class="highlight"><pre>    <span class="c1">// use commas to separate multiple expression in the same case statement </span>
    <span class="k">switch</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">().</span><span class="nx">Weekday</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Saturday</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Sunday</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;it&#39;s the weekend&quot;</span><span class="p">)</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;it&#39;s a weekday&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// alternate way to implement If/Else while without an expression</span>
    <span class="nx">t</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span>
    <span class="k">switch</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">t</span><span class="p">.</span><span class="nx">Hour</span><span class="p">()</span> <span class="p">&lt;</span> <span class="mi">12</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;it&#39;s before noon&quot;</span><span class="p">)</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;it&#39;s after noon&quot;</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>


<ul>
<li>Array, Slices, Maps</li>
</ul>
<div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">a</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">int</span>
    <span class="nx">s</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">string</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>
</pre></div>


<ul>
<li>
<p>Functions
    Do NOT support nested functions, function overload, function default parameter</p>
<ul>
<li>
<p>multiple return values
<code>go
func vals() (int, int) {
    return 3, 7
}
func main() {
    a, b = vals()
    _, b = vals()
}</code></p>
</li>
<li>
<p>variadic function<br />
<code>go
func sum(nums ...int) {
    fmt.Printlf(nums)
}
func main() {
    sum(1, 2, 3)
    nums := []int{1, 2, 3, 4}
    sum(nums...)
}</code></p>
</li>
<li>Clousure
    Go supports anonymous functions, which can form closures.</li>
<li>
<p>Defer
    ```go
    package main</p>
<p>import "fmt"</p>
<p>func main() {
    defer fmt.Println("世界")
    fmt.Println('Hello')
}
<code>Deferred function calls are pushed onto a stack. When a function returns, its deferred calls are executed in last-in-first-out order.
    - Panic</code>go
package main</p>
<p>import "fmt"</p>
<p>func test() {
    defer func() {
        if err := recover(); err != nil {
            fmt.Println(err.(string))
        }
    }()
    panic("panic errors")
}</p>
<p>func main() {
    test()
}
```
    - Errors
- Pointers,  Structs,  Methods, Interface</p>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span class="c1">// _Interfaces_ are named collections of method</span>
<span class="c1">// signatures.</span>

<span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&quot;fmt&quot;</span>
<span class="kn">import</span> <span class="s">&quot;math&quot;</span>

<span class="c1">// Here&#39;s a basic interface for geometric shapes.</span>
<span class="kd">type</span> <span class="nx">geometry</span> <span class="kd">interface</span> <span class="p">{</span>
    <span class="nx">area</span><span class="p">()</span> <span class="kt">float64</span>
    <span class="nx">perim</span><span class="p">()</span> <span class="kt">float64</span>
<span class="p">}</span>

<span class="c1">// For our example we&#39;ll implement this interface on</span>
<span class="c1">// `rect` and `circle` types.</span>
<span class="kd">type</span> <span class="nx">rect</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="kt">float64</span>
<span class="p">}</span>
<span class="kd">type</span> <span class="nx">circle</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">radius</span> <span class="kt">float64</span>
<span class="p">}</span>

<span class="c1">// To implement an interface in Go, we just need to</span>
<span class="c1">// implement all the methods in the interface. Here we</span>
<span class="c1">// implement `geometry` on `rect`s.</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="nx">rect</span><span class="p">)</span> <span class="nx">area</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">r</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">r</span><span class="p">.</span><span class="nx">height</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="nx">rect</span><span class="p">)</span> <span class="nx">perim</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="nx">r</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="nx">r</span><span class="p">.</span><span class="nx">height</span>
<span class="p">}</span>

<span class="c1">// The implementation for `circle`s.</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="nx">circle</span><span class="p">)</span> <span class="nx">area</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Pi</span> <span class="o">*</span> <span class="nx">c</span><span class="p">.</span><span class="nx">radius</span> <span class="o">*</span> <span class="nx">c</span><span class="p">.</span><span class="nx">radius</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="nx">circle</span><span class="p">)</span> <span class="nx">perim</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Pi</span> <span class="o">*</span> <span class="nx">c</span><span class="p">.</span><span class="nx">radius</span>
<span class="p">}</span>

<span class="c1">// If a variable has an interface type, then we can call</span>
<span class="c1">// methods that are in the named interface. Here&#39;s a</span>
<span class="c1">// generic `measure` function taking advantage of this</span>
<span class="c1">// to work on any `geometry`.</span>
<span class="kd">func</span> <span class="nx">measure</span><span class="p">(</span><span class="nx">g</span> <span class="nx">geometry</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">area</span><span class="p">())</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">perim</span><span class="p">())</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">r</span> <span class="o">:=</span> <span class="nx">rect</span><span class="p">{</span><span class="nx">width</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">height</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
    <span class="nx">c</span> <span class="o">:=</span> <span class="nx">circle</span><span class="p">{</span><span class="nx">radius</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>

    <span class="c1">// The `circle` and `rect` struct types both</span>
    <span class="c1">// implement the `geometry` interface so we can use</span>
    <span class="c1">// instances of</span>
    <span class="c1">// these structs as arguments to `measure`.</span>
    <span class="nx">measure</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span>
    <span class="nx">measure</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>Reflect</li>
</ul>
<h3>多线程处理</h3>
<ul>
<li>Goroutines
  A goroutine is a lightweight thread of execution.
  ```go</li>
</ul>
<p>package main
  import "fmt"</p>
<p>func f(from string) {
        for i := 0; i &lt; 3; i++ {
            fmt.Println(from, ":", i)
  } 
  func main() {
      go f("args")
      go func(msg string) {
          fmt.Println(msg)
      }("going")
    var input string
    fmt.Scanln(&amp;input)
    fmt.Println("done")
  }
  ```
- Channels</p>
<div class="highlight"><pre>Channels are the pipes that connect concurrent goroutines. You can send values into channels from one goroutine and receive those values into another goroutine.
```go
</pre></div>


<p>package main
import "fmt"
func main() {
    messages := make(chan string)
    go func() { messages &lt;- "ping" }()
    msg := &lt;-messages
    fmt.Println(msg)
}
    ```</p>
<div class="highlight"><pre><span class="o">-</span> Channel Buffering
<span class="sb">` messages := make(chan string, 2)`</span>
<span class="o">-</span> Channel Direction
<span class="sb">`func pong(pings &lt;-chan string, pongs chan&lt;- string) {}`</span>
<span class="o">-</span> Closing Channel
<span class="sb">`close(channel)`</span>
Closing channel means there is no more values to be sent <span class="p">,</span> it is possible to close a non<span class="o">-</span>empty channel
<span class="o">-</span> Range over channels
    Range can not only provide iteration over basic data <span class="kp">structure</span><span class="p">,</span> but also iterate over values received from a channel.

    <span class="sb">``</span>`go
    queue <span class="o">:=</span> make<span class="p">(</span>chan string<span class="p">,</span> <span class="m">2</span><span class="p">)</span>
    queue <span class="o">&lt;-</span> <span class="s">&quot;one&quot;</span>
    queue <span class="o">&lt;-</span> <span class="s">&quot;two&quot;</span>
    <span class="kp">close</span><span class="p">(</span>queue<span class="p">)</span>
    <span class="kr">for</span> elem <span class="o">:=</span> range queue <span class="p">{</span>
        fmt.Println<span class="p">(</span>elem<span class="p">)</span>
    <span class="p">}</span>
    <span class="sb">``</span>`
</pre></div>


<ul>
<li>Select</li>
</ul>
<div class="highlight"><pre><span class="c1">// Go&#39;s _select_ lets you wait on multiple channel</span>
<span class="c1">// operations. Combining goroutines and channels with</span>
<span class="c1">// select is a powerful feature of Go.</span>

<span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&quot;time&quot;</span>
<span class="kn">import</span> <span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// For our example we&#39;ll select across two channels.</span>
    <span class="nx">c1</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">string</span><span class="p">)</span>
    <span class="nx">c2</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">string</span><span class="p">)</span>

    <span class="c1">// Each channel will receive a value after some amount</span>
    <span class="c1">// of time, to simulate e.g. blocking RPC operations</span>
    <span class="c1">// executing in concurrent goroutines.</span>
    <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span> <span class="o">*</span> <span class="mi">1</span><span class="p">)</span>
        <span class="nx">c1</span> <span class="o">&lt;-</span> <span class="s">&quot;one&quot;</span>
    <span class="p">}()</span>
    <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
        <span class="nx">c2</span> <span class="o">&lt;-</span> <span class="s">&quot;two&quot;</span>
    <span class="p">}()</span>

    <span class="c1">// We&#39;ll use `select` to await both of these values</span>
    <span class="c1">// simultaneously, printing each one as it arrives.</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="k">select</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">msg1</span> <span class="o">:=</span> <span class="o">&lt;-</span><span class="nx">c1</span><span class="p">:</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;received&quot;</span><span class="p">,</span> <span class="nx">msg1</span><span class="p">)</span>
        <span class="k">case</span> <span class="nx">msg2</span> <span class="o">:=</span> <span class="o">&lt;-</span><span class="nx">c2</span><span class="p">:</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;received&quot;</span><span class="p">,</span> <span class="nx">msg2</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3>包管理</h3>
<ul>
<li>Go 语言中 <code>import</code> 语句使用绝对路径的方式引入安装到本地的包。</li>
<li>使用 <code>go get</code> 命令安装远程仓库中托管的包</li>
<li>Go 语言还提供了一个 Workspace 的机制。通过设定 GOPATH环境变量，指定除了GOROOT所指定的目录之外，Go 代码所在的位置 (也就是 Workspace 的位置)。 一般来说，GOPATH目录下会包含pkg、src和bin三个子目录，这三个目录各有用处。<ul>
<li><strong>bin</strong> 目录用来放置编译好的可执行文件，为了使得这里的可执行文件可以方便的运行， 在 shell 中设置PATH变量。</li>
<li><strong>pkg</strong> 目录用来放置代码源文件，在进行import时，是使用这个位置作为根目录的。自己编写的代码也应该放在这下面。</li>
<li><strong>src</strong> 用来放置安装的包的链接对象 (Object) 的。这个概念有点类似于链接库，Go 会将编译出的可连接库放在这里， 方便编译时链接。不同的系统和处理器架构的对象会在pkg存放在不同的文件夹中。</li>
</ul>
</li>
</ul>
<div class="highlight"><pre>├── bin
│   └── hello
├── pkg
│   └── darwin_amd64
│       └── github.com
│           └── user
│               └── stringutil.a
└── src
    └── github.com
        └── user
            ├── hello
            │   ├── hello
            │   └── hello.go
            └── stringutil
                └── reverse.go
</pre></div>


<h3>进阶</h3>
<ul>
<li>Memory Allocator</li>
<li>Garbage Collector</li>
<li>Goroutine Scheduler</li>
<li>Channel</li>
</ul>
<h4>参考资料</h4>
<ul>
<li><a href="https://tour.golang.org/welcome/1">A Tour of Go</a></li>
<li><a href="https://gobyexample.com">Go By Example</a></li>
<li><a href="http://golang.org/doc/code.html#PackageNames">How to Write Go Code</a></li>
<li><a href="http://www.oschina.net/p/go-fundamental-programming">go 编程基础（视频）</a></li>
<li><a href="https://github.com/nullne/book/blob/master/Go%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20%E7%AC%AC%E5%9B%9B%E7%89%88.pdf">Go学习笔记 -- 雨痕</a></li>
<li><a href="http://io-meter.com/2014/07/30/go's-package-management/">Go 语言的包依赖管理</a></li>
</ul> <a class="btn btn-primary pull-right" href="/golang/2015/first-glance-at-go.html">More…</a>
	</div>
</div>	
<div class='article'>
	<h2><a class="more" href="/suo-sui/2015/What-do-you-really-want.html">你到底想要一个什么的工作</a></h2>
	<div class=""><p>每次都不知道怎么开头。。
来了CC两个多礼拜吧，什么事情也没有做其实，无非是每天看看文档，帮头儿做下技术调研。刚才机器挂掉了，所以顺便出来坐坐</p>
<p>一般终面的时候面试官都会问你一个问题，你理想中的公司或者工作是什么样子的？是个好问题，但是当时却不一定能够回答得好。
现在正是个好时机想想这个问题。</p>
<p>首先，理想中的工作一定不是每天10+个小时对着电脑，要么做一些用脚后跟都能处理的事情，要么就是四指来回滑动切换画面无聊度日。现在遇到的技术性问题大多都可以通过 Google 解决，并且问题深度不够。技术方面的成长纯粹通过点滴积累得到的。这种工作没有个性而言，换做谁做都不会有什么变化。再者评价一个人能力纯粹根据他掌握的知识判断，自身的能力其实差别并不是很重要。说的再明白一点，丰富的技术经历技术积累一定会使你成为某一个领域的大牛，至少大多数人看来如此。但这并不妨碍一些人（往往他们比较挑剔并且很有品味)看不起你。<br />
这就是我说的第二点。你的工作还需要灵魂的提高。大多数同行业的人对码农的评价基本上都是技术牛，没品位，能赚钱，不会花。其实我说的并不是很到位，甚至只是个人片面看法。我没有接触过更厉害的码农，这也是导致我的思维狭隘的一个原因。一个人的工作如果能让他变得不同于其他人，那么这份工作就是我的这个层次上的需求。随之而来的问题就是人是群居动物，如果你明显的鹤立鸡群的话你也许会越来越孤独。当然这又是另一个话题了。
再有一个无关于工作的因素，一个人的烦恼大部分因为理想远高于能力。恰恰这个东西又是非常不容易评判的。有一个词叫做潜力，当你明明知道自己的能力达不到自己的梦想的时候就会用这个词来搪塞，而且效果奇佳。人很难看清楚自己，别人容易看清楚自己是因为他们对你漠不关心！  </p>
<p>好了，是时候描述一下我心目中理想的工作是什么样子了。
一间很有味道的屋子，跟一些完全不是一个成长体系（说人话，专业迥异）的人共同做一件有意思的事情。这个事情没有必要描述的很清楚，总之是在做一件有意思的事情。
好吧我说不出来了，我想自己的思维已经被禁锢了，被和我一样想法的人禁锢了。因为我想要的生活一定是由一群苦逼的人们撑起来的。</p>
<p>每次写东西都不尽兴，写的不知所云。我也不知道美好的生活什么样子的，我只知道我周围的人没有一个过着我的生活。</p>
<p><img alt="enter image description here" src="http://ww2.sinaimg.cn/mw1024/8c7ca3c9jw1eqg02wp7q0j21jk15on6e.jpg" /></p> <a class="btn btn-primary pull-right" href="/suo-sui/2015/What-do-you-really-want.html">More…</a>
	</div>
</div>	
<div class='article'>
	<h2><a class="more" href="/web/2014/real-attack-show-wifi-vulnerability.html">WIFI 热点欺骗</a></h2>
	<div class=""><p><em>很久以前看过一篇关于WIFI脆弱性的<a href="http://fex.baidu.com/blog/2014/04/traffic-hijack/">介绍</a>(找了好久终于被我找到了)，其中有一部分讲的是由于本身协议的弱点，相同 ssid 的热点会被合并为同一个，至于用户最终连接哪个热点取决于他所能接收到的信号强度。不知道此刻各位看官脑洞有没有大开？</em></p>
<p><em>俗话说杀生不如宰熟，所以直接就向学校 ap 下手了。提前声明几个全局变量：</em></p>
<div class="highlight"><pre><span class="n">ssid</span><span class="o">:</span> <span class="n">NICESHOT</span>
<span class="n">os</span><span class="err">：</span> <span class="n">ubuntu</span>
</pre></div>


<h3>简单部署</h3>
<h4>用 hostapd 建立热点</h4>
<blockquote>
<p>“<strong>hostapd</strong> is a user space daemon for access point and authentication servers. “</p>
</blockquote>
<div class="highlight"><pre>sudo apt-get install hostapd
</pre></div>


<p>更改配置文件 <em>/etc/hostapd-hotspot.conf</em> 如下：</p>
<div class="highlight"><pre># WiFi Hotspot
interface=wlan0
driver=nl80211
#Access Point
ssid=NICESHOT
hw_mode=g
# WiFi Channel:
channel=1
#macaddr_acl=0
auth_algs=1
wmm_enabled=0
#ignore_broadcast_ssid=0
#wpa=3
#wpa_passphrase=1
#wpa_key_mgmt=WPA-PSK
#wpa_pairwise=TKIP
#rsn_pairwise=CCMP
ctrl_interface=/var/run/hostapd
</pre></div>


<p>可能还需要更改 <em>/etc/default/hostapd</em> 为</p>
<div class="highlight"><pre>DAEMON_CONF=/etc/hostapd/hostapd.conf
</pre></div>


<p>然后测试配置文件<code>hostapd -d /etc/hostapd-hotspot.conf</code>,  没有什么问题的话就可以启动服务了</p>
<div class="highlight"><pre>service hostapd start
</pre></div>


<h4>微型 DNCP &amp; DNS -- dnsmasq</h4>
<blockquote>
<p>Dnsmasq is a free software DNS forwarder and DHCP server for small networks. It is considered to be easily configured, with low system resource usage.</p>
</blockquote>
<div class="highlight"><pre>sudo apt-get install dnsmasq
</pre></div>


<p>更改配置文件 <em>/etc/dnsmasq.conf</em></p>
<div class="highlight"><pre>log-facility=/var/log/dnsmasq.log
address=/#/192.168.1.1
interface=wlan0                                                                             
dhcp-range=192.168.1.20,192.168.1.254,12h
no-resolv 
</pre></div>


<p>然后比较关键的是配置 <strong>wlan0</strong> IP 地址 <code>ifconfig wlan0 192.168.1.1</code>。</p>
<p>稍微总结一下，到此为止，我们做了这么些事情：创建 WFIFI 热点，监听 <strong>wlan0</strong> 口，然后通过配置DHCP给所有连接到此 AP 的终端分配IP地址。另外上面的这条配置<code>address=/#/192.168.1.1</code>，将所有地址解析到我们的电脑 IP。</p>
<h4>搭建服务器</h4>
<p>此处就不详说了，最终达到的效果是访问 <code>192.168.1.1</code>是我们的钓鱼网站。</p>
<p>因为校园网需要登陆，也就是说连接校园 AP 之后将所有 HTTP 页面跳转到网关登陆界面。所以我们也部署一个一模一样的登陆网关，然后所有连接的用户跟往常一样登陆网关，神不知鬼不觉得就把账号密码泄露过来了。稍后我会分享此处的简单代码 DEMO 到 GitHub。</p>
<h3>进阶</h3>
<p>当然不能停止在这么简陋的东西上面，我们需要更进一步。</p>
<h4>粗暴的强制下线</h4>
<p>毕竟我们只有一个无线网卡，用作 AP 之后就不能接入其他网络了，环境也不允许拉一根网线，用户登录网关之后根本没办法继续上网，很快你的伪 AP 就会被发现。所以我们强制所有登录网关，也就是被我们窃取密码的用户离线。</p>
<div class="highlight"><pre>hostapd_cli deauthenticate 38:bc:1a:88:12:61                                                     
iptables -A INPUT -m mac --mac-source 38:bc:1a:88:12:61 -j DROP
</pre></div>


<p>第一句强制用户离线，之前在配置 hostapd 的时，这句就是为了达到这个目的 <code>ctrl_interface=/var/run/hostapd</code>，第二句将所有该设备的请求丢弃。这就是当一个人丧失所有利用价值之后的下场！</p>
<h4>配置更为合理的 iptables（还没有实现）</h4>
<p>当然，前提是我们自己的电脑还可以通过其他口，比如 <em>eth0</em>，访问正常网络。</p>
<p>通过配置合理强大的 <strong>iptables</strong>,精心布局，我们不仅仅获取网关密码这么简单的并且还需要特别严格苛刻的场景的蛋糕。拭目以待。。。</p>
<h3>思考</h3>
<h3>后记</h3>
<h4>伤敌一百，自损三千</h4>
<p>因为自己的装备跟技术很挫，在配置之前那些东西的时候碰到了一些问题，险些出师未捷身先死。</p>
<p>在 ubuntu 下，<code>service networking restart</code>,然后你就各种问题爽翻天
- 现在，至少目前为止插上网线之后还需要 <code>ifup eth0</code> 才能通过有线上网
- 现在，至少目前为止我连接 WIFI 的时候需要这么做（运气好的话差不多能连接上）</p>
<div class="highlight"><pre>ifup wlan0   #up the wlan port 
iwlist wlan0 scan #list availabel wifi ssid
iwconfig wlan0 essid &quot;NICESHOT&quot;  #no password
iwconfig wlan0 ssid &quot;NICESHOT&quot; key password   #with password
dhcpclient wlan0   #get ip via dhcp 
</pre></div>


<ul>
<li>电脑里面出现了奇怪的端口:wlan0:avahi</li>
<li>系统自带的 network-manager 罢工了</li>
<li>其他未知错误待续</li>
</ul> <a class="btn btn-primary pull-right" href="/web/2014/real-attack-show-wifi-vulnerability.html">More…</a>
	</div>
</div>	
<div class='article'>
	<h2><a class="more" href="/suo-sui/2014/build-and-remember-continued.html">建站续，附乱七八糟</a></h2>
	<div class=""><p><em>逛了一圈论坛博客神马的发现好多人也都在写点东西纪念今天</em></p>
<p>距离上一次写东西已经很久了，主要原因是因为Air跪了！幸灾乐祸的主儿可以去看看<a href="http://weibo.com/2356978633/B7CNpb52w?type=comment#_rnd1415671779372">原微</a>，那可是目前自己微博上最火的一个</p>
<p><img alt="Alt text" src="http://ww2.sinaimg.cn/large/8c7ca3c9jw1eh3fj6ouc4j21kw23u1kx.jpg" /></p>
<p>应该说这是之前那篇文章的续吧，可惜那篇的_Markdown_格式的已经弄没了，附上<a href="nullne.com/archivi/abc.html">链接</a>（估计也是唯一一个入口了）。当初心血来潮，也不完全心血来潮，算是小时候一个梦想吧，搞了这么一个极有技术含量的博客。现在看看当时还在初学者水平，只是简单的按照别人的教程做了下来。因为本儿跪了之后源代码也一并去了，所以一直都没有再更新，这一次重建博客，在之前的基础上新增加了很多东西，<a href="https://travis-ci.org/"><strong>Travis</strong></a>就是一个牛逼了的东西，待会儿我会接着把这一次的技术性细节一并简单介绍。</p>
<h3>技术细节</h3>
<ul>
<li>
<p><a href="https://travis-ci.org/"><strong>Travis CI</strong></a></p>
<blockquote>
<p>Travis CI is a hosted continuous integration service.
Travis CI's build environment provides different runtimes for different languages, for instance multiple versions of Ruby, PHP, Node.js. It also comes preinstalled with a variety of data stores and common tools like message brokers.</p>
</blockquote>
<p>使用<strong>Pelican</strong>的常规思路是在本地写好<strong>md</strong>或者其他格式的文件，然后<code>make publish</code>，当然这是集成命令，分解开就是先生成静态页面然后PUSH到<strong>Git page</strong>。看着似乎很简单，这是建立在首先配置好你的本地环境的基础上，并且每次换一台机器之后你都需要重新配置你的环境。配环境这事儿我只能呵呵了，那么多的的平台配法儿都不太一样。</p>
<p>但是，当你遇到<strong>Travis CI</strong>一切就都不一样了。你只要一次性配置完成，将你的source文件PUSH到某一个github仓库。之后的事情就容易多了，按最坏的情况来说，你的本撒手人寰了（哭瞎），你写了一篇文章纪念。以最快的速度把舍友的本儿扯过来.</p>
</li>
</ul>
<div class="highlight"><pre>git clone git://github.com/username/bri.github.io-source
mv remember.md path/to/content/
git add *
git commit -m <span class="s2">&quot;love you forever&quot;</span>
git push
</pre></div>


<p>Done! 你的本儿在天之灵，看到以后应该就会安息了。</p>
<p>废话不说了，按照<a href="http://zonca.github.io">Zonca</a>的<a href="http://zonca.github.io/2013/09/automatically-build-pelican-and-publish-to-github-pages.html">教程</a>一步一步下来基本没有错误，但是当时我走了很多弯路，自作聪明的改了一些脚本。如果遇到什么问题欢迎讨论。</p>
<ul>
<li>
<p><a href="http://www.tipue.com/"><strong>Tipue</strong></a></p>
<blockquote>
<p>Tipue Search is a site search engine jQuery plugin. It's free, open source and responsive.</p>
</blockquote>
<p>还是跟上面一样，按照<a href="http://moparx.com">Moparx</a>的<a href="http://moparx.com/2014/04/adding-search-capabilities-within-your-pelican-powered-site-using-tipue-search/">教程</a>走吧。</p>
<p>还有很多其他插件，像_Sitemap_什么的，之所以单独把这个列在这儿是因为发现原来静态页面也是可以交互的，它提供了一个思路。简单说就是将所有的网站页面存储到一个_JSON_文件，然后在搜索页面直接加载这个文件在本地搜索,非常快速。</p>
</li>
<li>
<p><strong>Google Comments</strong></p>
<p>之前用的是<strong>Disqus</strong>,但是总感觉不是很舒服，这儿有一个简单的<a href="http://browsingthenet.blogspot.com/2013/04/google-plus-comments-on-any-website.html">教程</a></p>
</li>
</ul>
<h3>都说是纪念了</h3>
<p>高大上的<em>APEC</em>假期马上就结束了，按照大四之前的性子，至少半个月前已经在他乡了，异国不敢说，但是已经开始筹划了，护照就是第一步。六天的假期在我这儿怎么也得有半个月。最近却怂怂的呆在学校哪儿也不敢去。</p>
<p>反正就是没有找到工作。</p>
<p><em>好的工作</em>应该是什么样子的，我想了很多遍，从最开始投的第一家说起吧。</p>
<p>阿里巴巴，以网上笔试结果<strong>诚信第一</strong>终结了我。当时第一次参加网上笔试，幸灾乐祸的跟队友共同战斗以望能够从人海中脱颖而出。至于诚信什么的以后再说吧，大学之后关于这个的定义改变了很多。百度两次笔试无果，腾讯没有投递。BAT梦石沉大海，系统关照我有选择困难症。这之前我一直以为找份BAT的工作很容易，这之后我才去想一些事情。</p>
<p>。。。。。。</p>
<p>算了先就不无病呻吟了，刚才接到<strong>知道创宇</strong>HR的电话，在这么一个特殊的节日去面试。</p>
<p>最后附图纪念 <strong><em>1111</em></strong></p>
<p><img alt="Alt text" src="https://lh5.googleusercontent.com/-foXL3QCuRco/VGDh3Wvvy8I/AAAAAAAAADg/iwtexzazuGg/s481/yule.jpg" /></p> <a class="btn btn-primary pull-right" href="/suo-sui/2014/build-and-remember-continued.html">More…</a>
	</div>
</div>	
<div class='article'>
	<h2><a class="more" href="/web/2011/ARP-protocol.html">ARP protocol analysis</a></h2>
	<div class=""><h1>ARP 协议分析</h1>
<p>@[arp|wireshark]</p>
<p><strong>地址解析协议</strong>，即<strong>ARP</strong>（Address Resolution Protocol） 是根据IP地址获取物理地址的一个TCP/IP协议。</p>
<ul>
<li><strong>工作过程</strong></li>
<li><strong>协议实战分析</strong></li>
<li><strong>安全威胁分析</strong></li>
</ul>
<hr />
<h3>工作流程</h3>
<p>主机A的IP地址为192.168.1.1，MAC地址为0A-11-22-33-44-01；
主机B的IP地址为192.168.1.2，MAC地址为0A-11-22-33-44-02；
当主机A要与主机B通信时，地址解析协议可以将主机B的IP地址（192.168.1.2）解析成主机B的MAC地址，以下为工作流程：
1. 根据主机A上的路由表内容，IP确定用于访问主机B的转发IP地址是192.168.1.2。然后A主机在自己的本地ARP缓存中检查主机B的匹配MAC地址。
2. 如果主机A在ARP缓存中没有找到映射，它将询问192.168.1.2的硬件地址，从而将ARP请求帧广播到本地网络上的所有主机。源主机A的IP地址和MAC地址都包括在ARP请求中。本地网络上的每台主机都接收到ARP请求并且检查是否与自己的IP地址匹配。如果主机发现请求的IP地址与自己的IP地址不匹配，它将丢弃ARP请求。
3. 主机B确定ARP请求中的IP地址与自己的IP地址匹配，则将主机A的IP地址和MAC地址映射添加到本地ARP缓存中。
4. 主机B将包含其MAC地址的ARP回复消息直接发送回主机A。
5. 当主机A收到从主机B发来的ARP回复消息时，会用主机B的IP和MAC地址映射更新ARP缓存。本机缓存是有生存期的，生存期结束后，将再次重复上面的过程。主机B的MAC地址一旦确定，主机A就能向主机B发送IP通信了</p>
<h3>协议实战分析</h3>
<blockquote>
<p>测试环境：windows
测试工具: cmd, wireshark</p>
</blockquote>
<ol>
<li>在<code>cmd</code>中获取网关ip：10.3.17.1 <img alt="Alt text" src="./QQ图片20141028221016.png" /></li>
<li>配置<code>wireshap</code>截取来自网关，即10.3.17.1的arp包，设置如下<img alt="Alt text" src="./QQ图片20141028222301.png" />
获取到arp包后停止，见下图<img alt="Alt text" src="./QQ图片20141028222312.jpg" /></li>
<li>随机选择一个arp包（最后一个）进行分析<img alt="Alt text" src="./QQ图片20141028222528.png" /></li>
<li>arp包明确定义了Hardware type,Protocol type,Hardware size,Protocol size,Sender Mac  and IP address,Target Mac and IP address(从上面翻译后的内容可以清晰的看到)。</li>
<li>ARP缓存会持续一段时间（一般为2分钟），之后又进行新一轮的更新。</li>
</ol>
<h3>安全威胁分析</h3>
<p>（因为模拟ARP攻击可能导致局域网内部出错，故此处只做理论分析）</p>
<h4>ARP欺骗</h4>
<p>ARP请求为广播形式发送的，网络上的主机可以自主发送ARP应答消息，并且当其他主机收到应答报文时不会检测该报文的真实性就将其记录在本地的MAC地址转换表，这样攻击者就可以向目标主机发送伪ARP应答报文，从而篡改本地的MAC地址表。 ARP欺骗可以导致目标计算机与网关通信失败，更会导致通信重定向，所有的数据都会通过攻击者的机器。
        最简单的攻击方式就是发送固定格式的ARP报文，类似于下面的格式：<img alt="Alt text" src="./QQ图片20141028224008.png" />
已知被攻击者的ip以及mac地址（如果不知道可直接使用广播地址<code>FF.FF.FF.FF</code>），将其自己的mac地址以及想截获的目标地址IP封装好发送，即能够刷新被欺骗主机的ARP缓存，从而得到本该发往另一个IP的所有包</p>
<h4>ARP cache poisoning</h4> <a class="btn btn-primary pull-right" href="/web/2011/ARP-protocol.html">More…</a>
	</div>
</div>	


        </div>
        <div class="push"></div>
    </div><!--container-fluid-->


    <footer class="">
        <div class="container">
            <div class="row">
               <div class="span3">
                    <h3>Site</h3>
                    <ul class="unstyled">
                        <li><a href="/tags.html"><i class="icon-tags"></i>&nbsp;Tags</a></li>
                        <li><a href="/archives.html"><i class="icon-list-alt"></i>&nbsp;Archives</a></li>
                        <li><a href="/all-atom.xml"><i class="icon-star-empty"></i>&nbsp;RSS</a></li>
                    </ul>
                </div>
                <div class="span3">
                    <h3>Category</h3>
                    <ul>
                        <li><a href="/category/web.html">web</a></li>
                        <li><a href="/category/suo-sui.html">琐碎</a></li>
                        <li><a href="/category/golang.html">Golang</a></li>
                    </ul>
                </div>
                <div class="span3">
                    <h3>Blogroll</h3>
                    <ul class="unstyled">
                        <li><a href="http://zonca.github.io/"><i class="icon-user"></i>&nbsp;Zonca</a></li>
                        <li><a href="http://moparx.com/"><i class="icon-user"></i>&nbsp;Moparx</a></li>
                        <li><a href="http://blog.friparia.com/"><i class="icon-user"></i>&nbsp;Friparia</a></li>
                    </ul>
                </div>
                <div class="social span3">
                    <h3>Social</h3>
                    <ul class="unstyled">
                        <li><a href="https://github.com/nullne">Github</a></li>
                        <li><a href="https://www.linkedin.com/pub/le-yu/89/980/1a5">LinkedIn</a></li>
                        <li><a href="http://www.douban.com/people/nullnes/">豆瓣</a></li>
                        <li><a href="http://weibo.com/nullne">微博</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <p class="copyleft">&copy; nullne 2013-2014</p>
    </footer>
    </div><!--wrapper-->
</body>
</html>